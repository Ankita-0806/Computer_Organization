TITLE DISPLAY (EXE) DISPLAY THE CONTENT OF FILE
DISPLAY MACRO MESSAGE
  MOV AH,09H
  MOV DX,OFFSET MESSAGE
  INT 21H
ENDM

DATASEG SEGMENT 
    ERROR1 DB '**** OPEN ERROR ****$'
    ERROR2 DB '**** READ ERROR ****$'
    ERROR3 DB '****END ERROR****$' 
    MESSAGE1 DB 'ENTER FILE NAME: $'
    MESSAGE2 DB 'ENTER THE NUMBER OF BYTES TO BE READ IN HEX FORMAT: $'

FILE1 DB 20 DUP ('$')
FILEHAND DW ?
TEMP DB 12
TEMP1 DW
TEMP2 DW
DISAREA DB 2404H DUP ('$')
DATASEG ENDS

CODESEG  SEGMENT 
ASSUME DS:DATASEG ,CS:CODESEG ,ES:DATASEG
START:
        MOV AX,DATASEG
MOV DS,AX
MOV ES,AX

LEA DI,FILE1
MOV CX,20
MOV TEMP1,00
DISPLAY MESSAGE1
NAME:
       MOV AH,01H
INT 21H
CMP AL,0DH
JE FIRST
INC TEMP1
STOSB 
LOOP NAME
FIRST:
    MOV AX,00
MOV BX,TEMP1
MOV FILE1[BX],00H
MOV AH,3DH
MOV CX,00
LEA  DX,FILE1
INT 21H
MOV FILEHAND,AX
JC ERR1
DISPLAY MESSAGE2
MOV CX,4
MOV AX,00

TIMES:

   MOV BX,0
PUSH AX
PUSH CX
MOV AH,01H
INT 21H
MOV AH,0
CMP AX,97
JAE XXX
JMP BYPASS

XXX:
     SUB AX,32

BYPASS:
      CMP AX,000DH
JE ENTER
CMP AX,65
JAE LETTER
SUB AX,48
JMP IDID

LETTER:
       SUB AX,55

IDID:
       MOV BX,AX
MOV CL,TEMP
SHL BX,CL
POP CX
POP AX
OR AX,AX
SUB TEMP,4
LOOP TIMES 
JMP L20

ERR1:
      DISPLAY ERROR1
JMP FINISH

ENTER:
       POP CX
POP AX
SHL CX,1
SHL CX,1
SHR AX,1

L20:
      MOV TEMP2,AX
MOV AH,3FH
MOV CX,TEMP2
MOV BX,FILEHAND
LEA DX,DISAREA
INT 21H
JC ERR2
MOV CX,TEMP2
LEA SI,DISAREA

SHOW:
      LODSB
MOV AL,AL
MOV AH,02H
INT 21H

LOOP SHOW

MOV AH,3EH
MOV BX,FILEHAND
INT 21H
JC ERR3
JMP FINISH

ERR2:
    DISPLAY ERROR2
JMP FINISH

ERR3:
      DISPLAY ERROR3

FINISH:
      MOV AX,4C00H
      INT 21H

CODESEG ENDS
END START
